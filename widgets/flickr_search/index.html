<html>
<head>
	<title>VIE Widget - Flickr Search</title>
    
	<script type="text/javascript" src="../../lib/jquery-1.6.1.js"></script>
    <script type="text/javascript" src="../../lib/jquery-ui-1.8.16.js"></script>
    
    <!-- jQuery Lightbox plugin -->
    <script type="text/javascript"          src="../../utils/lightbox/jquery.lightbox-0.5.js"></script>
    <link rel="stylesheet" type="text/css" href="../../utils/lightbox/jquery.lightbox-0.5.css" media="screen" />
    
    <script type="text/javascript" src="../../lib/rdfquery.js"></script>
    <script type="text/javascript" src="../../lib/underscore.js"></script>        
    <script type="text/javascript" src="../../lib/backbone.js"></script>
      
    <!-- vie.js itself -->
	<script type="text/javascript" src="../../lib/vie.js"></script>
	<script type="text/javascript" src="../../utils/schemaOrg/schema.json"></script>
	<script type="text/javascript" src="../../utils/schemaOrg/wrapper.js"></script>
	
    <!--  the current VIE widget -->
	<script type="text/javascript" src="./vie.widget.flickr.js"></script>

    
    <script type="text/javascript">
    $(function() {
        // initialize a global VIE object
        var myVIE = window.myVIE = new VIE();
        myVIE.loadSchemaOrg();   
        myVIE.namespaces.base("http://schema.org/");
        
        //manually fill VIE with some entities:
        myVIE.entities.add({
        	'@subject'  : "http://dbpedia.org/resource/Barack_Obama",
        	'@type'     : 'Person',
        	'name'      : ['Barack Obama', 'Barack Hussein Obama'],
        	'birthDate' : '1961-08-04'
        });
        myVIE.entities.add({
        	'@subject'  : "http://dbpedia.org/resource/Steve_Jobs",
        	'@type'     : 'Person',
        	'name'      : 'Steve Jobs',
        	'birthDate' : '1955-02-24'
        });
        myVIE.entities.add({
        	'@subject'  : "http://dbpedia.org/resource/Berlin",
        	'@type'     : 'City',
        	'name'      : 'Steve Jobs',
        	'geo'       : {
        	    'latitude'  : 52.500557,
        	    'longitude' : 13.398889
        	}
        });
        
        $('#flickr_container')
        .flickr({
            vie     : myVIE,
            api_key : "ffd6f2fc41249feeddd8e62a531dc83e",
        });
                
        $('#entities').change(function (ev) {
            var uri = $(':selected', this).val();
            var entity = myVIE.entities.get(uri);
            $('#flickr_container').flickr({
                entity: entity
            });
        });
        
        $('[about]').click(function (ev) {
            var uri = $(this).attr('about');            
            $('#flickr_container').flickr('triggerSearch', uri);
        });
        
        $('.view-flickr-image').live("create", function(){
        	$(this).lightBox({
        	    imageLoading : "../../utils/lightbox/lightbox-ico-loading.gif",
        	    imageBtnClose: "../../utils/lightbox/lightbox-btn-close.gif",
        	    imageBtnPrev : "../../utils/lightbox/lightbox-btn-prev.gif",
        	    imageBtnNext : "../../utils/lightbox/lightbox-btn-next.gif",
        	    imageBlank   : "../../utils/lightbox/lightbox-blank.gif"
        	});
        });
        
    });
    </script>

</head>
<body>
    <h1>VIE Widget - Flickr Search - Demo</h1>
    <p>
        Please select an entity to trigger the photo search on <a href="http://www.flickr.com/">Flickr</a>.
    </p>
    <select id="entities">
        <option></option>
        <optgroup label="Persons">
            <option value="<http://dbpedia.org/resource/Barack_Obama>">Barack Obama</option>
            <option value="<http://dbpedia.org/resource/Steve_Jobs>">Steve Jobs</option>
        </optgroup>
        <optgroup label="Places">
            <option value="<http://dbpedia.org/resource/Berlin>">Berlin, Germany</option>
            <option value="<http://dbpedia.org/resource/Paris>">Paris, France</option>
        </optgroup>
    </select>
    
    <p>
    This is a text, where <span about="<http://dbpedia.org/resource/Barack_Obama>">Barack Obama</span> is annotated with RDFa.
    </p>
    
    
    <div id="flickr_container"></div>
    
    <div class="copyright">
        This site uses the <a href="http://www.flickr.com/services/api/">Flickr</a> API, however is not associated or endorsed by <a href="http://www.flickr.com/">Flickr</a>.
    </div>
</body>
</html>